{% extends "base.html" %}

{% block lab %}–ú–æ–∏ —Å—Ç–∞—Ç—å–∏{% endblock %}

{% block main %}
    <h1>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</h1>

    <div style="margin-bottom: 15px;">
        <a href="/lab8/create" style="padding:8px 12px; background:#4a76a8; color:#fff; border-radius:6px; text-decoration:none;">+ –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
        <a href="/lab8" style="margin-left:10px; color:#333; text-decoration:none;">‚Üê –ù–∞–∑–∞–¥</a>
    </div>

    {% if articles %}
        <div style="display:flex; flex-direction:column; gap:12px;">
        {% for a in articles %}
            <div style="border:1px solid #ddd; padding:12px; border-radius:6px; background:#fafafa;">
                <h3 style="margin:0 0 6px 0;">{{ a.title }}</h3>
                <div style="font-size:14px; ; margin-bottom:6px;">{{ a.article_text[:200] }}{% if a.article_text|length > 200 %}...{% endif %}</div>
                <div style="display:flex; gap:8px; align-items:center;">
                    <a href="/lab8/edit/{{ a.id }}" class="btn-action">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    
                    <form action="/lab8/delete/{{ a.id }}" method="post" style="display:inline;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é?');">
                        <button type="submit" class="btn-action btn-delete">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>

                    <form action="/lab8/toggle_favorite/{{ a.id }}" method="post" style="display:inline;">
                        <button type="submit" class="btn-fav" title="–î–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ">
                            {% if a.is_favorite %}
                                ‚ù§Ô∏è
                            {% else %}
                                ü§ç
                            {% endif %}
                        </button>
                    </form>

                    <span style="margin-left:auto; font-size:13px; color:#777;">ID: {{ a.id }}</span>
                </div>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π. <a href="/lab8/create">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é</a>.</p>
    {% endif %}

    <style>
        .btn-action, .btn-delete {
            padding: 6px 12px;
            border-radius: 5px;
            border: none;
            background:#f0f0f0;
            text-decoration:none;
            color:#333;
            display:inline-block;
            min-width:90px;
            text-align:center;
            cursor:pointer;
            transition: background 0.2s, color 0.2s;
        }

        .btn-action:hover, .btn-delete:hover {
            background:#d0d0d0;
            color:#000;
        }

        .btn-delete {
            background:#ff6b6b;
            color:#fff;
        }

        .btn-delete:hover {
            background:#ff4b4b;
            color:#fff;
        }

        .btn-fav {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 0 6px;
        }

        .btn-fav:hover {
            transform: scale(1.2);
        }
    </style>

{% endblock %}
